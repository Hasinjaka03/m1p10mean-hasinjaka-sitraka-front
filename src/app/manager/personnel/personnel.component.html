<app-header [user]="user"></app-header>

<main id="main" class="main">
    <section class="section d-flex flex-column align-items-center justify-content-center">
<div class="card d-flex flex-column width_form" >
    <div class="card-body" >
      <h5 class="card-title color_text text-center pb-0 fs-4">Ajout ou Modification employée</h5>
        <br>
      <!-- Horizontal Form -->
      <form (submit)="submitForm()" #insertionForm ="ngForm" >
        <div class="row mb-3">
            <label  class="col-sm-3 col-form-label">Image</label>
            <div class="col-sm-8">
            <div
                class="drop-area" 
                (dragover)="onDragOver($event)"
                (dragenter)="onDragEnter($event)"
                (dragleave)="onDragLeave($event)"
                (drop)="onDrop($event)"
            >
            <p *ngIf="!imageUrl">Drag and drop your image here</p>
            <img *ngIf="imageUrl" [src]="imageUrl" alt="Uploaded Image" class="image-class" />
            </div>
            <div class="pt-2">
                <a href="#" (click)="removePhoto($event)" class="btn btn-danger btn-sm" title="Remove the profile image"><i class="bi bi-trash"></i></a>
            </div>
            </div>
        </div>
        <div class="row mb-3">
          <label for="inputText1" class="col-sm-3 col-form-label">Nom</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" id="inputText1" name="nom" [(ngModel)]="inputEmploye.nom" required>
          </div>
        </div>
        <div class="row mb-3">
            <label for="inputText2" class="col-sm-3 col-form-label">Prenom</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputText2" name="prenom" [(ngModel)]="inputEmploye.prenom" required>
            </div>
          </div>
        <div class="row mb-3">
            <label for="inputText3" class="col-sm-3 col-form-label">Date de naissance</label>
            <div class="col-sm-8">
              <input type="date" class="form-control" id="inputText3" name="dateNaissance" [(ngModel)]="inputDate" required>
            </div>
        </div>
        <div class="row mb-3">
            <label for="inputText4" class="col-sm-3 col-form-label">Numéro tel</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputText4" name="numeroTelephone" [(ngModel)]="inputEmploye.numeroTelephone" required>
            </div>
          </div>
        <div class="row mb-3">
            <label for="inputText5" class="col-sm-3 col-form-label">Email</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" id="inputText5" name="email" [(ngModel)]="inputEmploye.email" required>
            </div>
        </div>
        <div class="row mb-3">
          <label for="inputEmail3" class="col-sm-3 col-form-label">Heure debut</label>
          <div class="col-sm-8">
            <input type="time" class="form-control" id="inputEmail3" name="inputDebut" [(ngModel)]="inputDebut" required >
          </div>
        </div>
        <div class="row mb-3">
            <label for="inputEmail4" class="col-sm-3 col-form-label">Heure fin</label>
            <div class="col-sm-8">
              <input type="time" class="form-control" id="inputEmail4" name="inputFin" [(ngModel)]="inputFin" required>
            </div>
        </div>
        <div class="row mb-3">
            <label for="inputText10" class="col-sm-3 col-form-label">Password</label>
            <div class="col-sm-8">
              <input type="password" class="form-control" id="inputText10" name="motDePasse" [(ngModel)]="inputEmploye.motDePasse" required>
            </div>
        </div>
        <br>
        <div class="text-center">
          <button type="submit" class="btn btn-primary w-25" [disabled]="insertionForm.invalid">Submit</button>&nbsp;    
        </div>
      </form><!-- End Horizontal Form -->
      <br>
        <div class="text-center">
          <button *ngIf="!iscreate" (click)="initialisee()" class="btn btn-secondary w-25">Annuler</button>
        </div>
      

        </div>
    </div>
</section>
<section class="section">
<div class="card">
    <div class="card-body">
      <h5 class="card-title color_text pb-0 fs-4">Liste des Employées</h5>

      <!-- Default Table -->
      <table class="table text-center">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Photo</th>
            <th scope="col">Nom</th>
            <th scope="col">Date de naissance</th>
            <th scope="col">Numéro tel</th>
            <th scope="col">Email</th>
            <th scope="col">Horaire de travail</th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let employe of employes; let i=index">
            <th scope="row">{{i+1}}</th>
            <td *ngIf="!employe.photo"><img src="assets/assets/img/default-avatar.png" alt="Profile" class="tab-image"></td>
            <td *ngIf="employe.photo"><img  [src]="employe.photo" alt="Uploaded Image" class="tab-image" /></td>
            <td>{{employe.nom}} &nbsp; {{employe.prenom}}</td>
            <td>{{employe.dateNaissance | date: 'dd MMMM yyyy' }}</td>
            <td>{{employe.numeroTelephone}}</td>
            <td>{{employe.email}}</td>
            <td>{{employe.heureDebut}} &nbsp;à &nbsp;{{employe.heureFin}}</td>
            <td><button (click)="ismodified(employe)" class="btn btn-primary rounded-pill">Modifier</button></td>
            <td><button (click)="supprimerEmploye(employe._id)" class="btn btn-success rounded-pill">Supprimer</button></td>
          </tr>
          
        </tbody>
      </table>
      <!-- End Default Table Example (click)="ismodified(service)"-->
    </div>
  </div>

  </section>

</main>     
<app-footer></app-footer>

